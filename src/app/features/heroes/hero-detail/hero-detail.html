<div class="hero-detail-container">
  <!-- using mat-accordion to apply space between
   header description and mat-icon via
   .mat-expansion-panel-header-description CSS class -->
  <mat-accordion>
    <mat-expansion-panel #expand (click)="expansionMethod()" hideToggle class="hero-detail-component-ai-summary-container">
      <mat-expansion-panel-header >
        <mat-panel-title>AI Summary</mat-panel-title>
        <mat-panel-description>
          Click to view a summary of {{heroData().localized_name}}'s Performance and Trend metrics
          <mat-icon>expand_circle_down</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div class="hero-detail-component-ai-summary-content-box">
        <p>{{displayText}}</p>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
  <br>
  <mat-card class="hero-detail-component-one">
    <div class="hero-detail-component-one-box1">
      <div class="hero-detail-component-one-box1-avatar">
        <img class="" src="{{fullPath()}}" alt="">
      </div>
      <div class="hero-detail-component-one-box1-hero-stats">
        <div class="name-role-box">
          <h1>{{heroData().localized_name}}</h1>
          <p>{{heroData().roles}}</p>
        </div>
        <br>
        <div class="table-box">
          <table>
            <tr>
              <td>
                <div class="table-box-td-flexbox">
                  <img src="https://cdn.steamstatic.com/apps/dota2/images/dota_react/icons/hero_strength.png" alt="">
                  <p>Base Strength: </p>
                </div>
              </td>
              <td>
                <h3>{{heroData().heroStats.base_str}}</h3>
              </td>
            </tr>
            <tr>
              <td>
                <div class="table-box-td-flexbox">
                  <img src="https://cdn.steamstatic.com/apps/dota2/images/dota_react/icons/hero_agility.png" alt="">
                  <p>Base Agility: </p>
                </div>
              </td>
              <td>
                <h3>{{heroData().heroStats.base_agi}}</h3>
              </td>
            </tr>
            <tr>
              <td>
                <div class="table-box-td-flexbox">
                  <img src="https://cdn.steamstatic.com/apps/dota2/images/dota_react/icons/hero_intelligence.png" alt="">
                  <p>Base intelligence: </p>
                </div>
              </td>
              <td>
                <h3>{{heroData().heroStats.base_int}}</h3>
              </td>
            </tr>
            <tr>
              <td>
                <div class="table-box-td-flexbox">
                  <img src="https://cdn.steamstatic.com/apps/dota2/images/dota_react//heroes/stats/icon_movement_speed.png" alt="">
                  <p>Movement Speed: </p>
                </div>
              </td>
              <td>
                <h3>{{heroData().heroStats.move_speed}}</h3>
              </td>
            </tr>

          </table>
        </div>
      </div>
    </div>

    <div class="hero-detail-component-one-box2">
      <app-doughnut-chart-component [totalWinsInput]="heroData().heroStats.pub_win" [TotalGamesInput]="heroData().heroStats.pub_pick"/>
      <br>
        <h2 id="doughnutWinrateTitleId">Overall Win-Lose Ratio</h2>
      <div id="doughnutTotalWinsBox">
        <table>
          <tr>
            <td> <p>Total Games: </p></td>
            <td><p>{{heroData().heroStats.pub_pick}}</p></td>
          </tr>
          <tr>
            <td> <p>Total Wins: </p> </td>
            <td>{{heroData().heroStats.pub_win}}</td>
          </tr>
        </table>
      </div>
    </div>
  </mat-card>

  <div class="hero-detail-component-two">
    <h2>Performance Metrics</h2>
    <div class="hero-detail-component-two-metrics-container">
      <mat-card>
        <mat-card-content>
          <div class="hero-detail-component-two-metrics-box">
            <h1 [ngStyle]="{'color': overallWinRateColorSet(heroData().winRate)}">
              {{heroData().winRate.toFixed(2)}}%
            </h1>
            <p>Overall Win Rate</p>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card>
        <mat-card-content>
          <div class="hero-detail-component-two-metrics-box">
            <h1>{{heroData().winGrowthRateChange.toFixed(2)}}</h1>
            <p>Win Rate Changes</p>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card>
        <mat-card-content>
          <div class="hero-detail-component-two-metrics-box">
            <h2 >
              <span [ngStyle]="{'color': growthRateColorSet(heroData().pickGrowthRateChange) }">
                {{heroData().pickGrowthRateChange.toFixed(2)}}%
              </span>
               | <span [ngStyle]="{'color': growthRateColorSet(heroData().winGrowthRateChange) }">{{heroData().winGrowthRateChange.toFixed(2)}}% </span>
               </h2>
            <p>Pick and Win Rate Changes</p>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card>
        <mat-card-content>
          <div class="hero-detail-component-two-metrics-box">
            <h1>{{heroData().trendStdDev.toFixed(2)}}</h1>
            <p>Trend Stability</p>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <div class="hero-detail-component-three">
    <h2>Trend Chart</h2>
    <div class="hero-detail-component-three-trendbox">
      <mat-card>
        @if(heroData().id != -1){
          <app-line-chart-component [pub_pick_trend]="heroData().heroStats.pub_pick_trend" [pub_win_trend]="heroData().heroStats.pub_win_trend"/>
        }
      </mat-card>
    </div>
  </div>

</div>

