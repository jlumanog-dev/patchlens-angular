<div class="hero-insight-container">
  <br>
    <mat-accordion class="hero-insight-container-expansion-panel" multi>
      <mat-expansion-panel #expand (click)="expansionMethod()" hideToggle class="hero-insight-component-ai-summary-container">
        <mat-expansion-panel-header>
          <mat-panel-title>AI-enabled Insights</mat-panel-title>
          <mat-panel-description>
            Click to view a summary of your Performance
            <mat-icon>expand_circle_down</mat-icon>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="hero-detail-component-ai-summary-content-box">
          <p>{{displayText}}</p>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  <br><br>
  <div class="hero-insight-container-header-box">
    <h3>Most Played Heroes for the last 20 Matches</h3>
  </div>
  <div class="hero-insight-heroes-played-flexbox">
<!--
      @for (element of heroesPlayed() | slice:0:3; track element.hero_id; let i = $index) {
        <div class="hero-insight-heroes-played-box">
          <app-doughnut-chart-component
                  [heroId]="heroesPlayed()[$index].hero_id"
                  [lastPlayed]="heroesPlayed()[$index].last_played"
                  [games]="heroesPlayed()[$index].games"
                  [win]="heroesPlayed()[$index].win"
                  [againstGames]="heroesPlayed()[$index].against_games"
                  [againstWins]="heroesPlayed()[$index].against_wins"
                  [doughnutChartLabel]="['loses', 'Wins']" />
          <div>
            <h2>{{heroesPlayed()[$index].localized_name}}</h2>
          </div>
        </div>
      } -->
        <div class="hero-insight-heroes-played-box">
<!--           <app-doughnut-chart-component
                    [heroId]="heroesPlayed()[0].hero_id"
                    [lastPlayed]="heroesPlayed()[0].last_played"
                    [games]="heroesPlayed()[0].games"
                    [win]="heroesPlayed()[0].win"
                    [againstGames]="heroesPlayed()[0].against_games"
                    [againstWins]="heroesPlayed()[0].against_wins"
                    [doughnutChartLabel]="['loses', 'Wins']" /> -->
          <mat-card>
            <mat-card-header>
              <div mat-card-avatar class="mat-card-avatar-class">
                <img class="header-image" src="http://cdn.dota2.com/{{mostPlayedHeroId().heroes[0].img}}">
              </div>
              <div>
                <h3>{{mostPlayedHeroId().heroes[0].localized_name}}</h3>
                <p class="heroes-played-role">
                  @for(element of mostPlayedHeroId().heroes[0].roles; track element){
                    <span>{{element}},&nbsp;</span>
                  }
                </p>
              </div>
            </mat-card-header>
              <mat-card-content>
                <div class="mat-card-content-box">
                  <h2>{{mostPlayedHeroId().heroes[0].averageKills.toFixed(2)}}</h2>
                  <p>Avg. Kills</p>
                </div>
                <div class="mat-card-content-box">
                  <h2>{{mostPlayedHeroId().heroes[0].averageDeaths.toFixed(2)}}</h2>
                  <p>Avg. Deaths</p>
                </div>
                <div class="mat-card-content-box">
                  <h2>{{mostPlayedHeroId().heroes[0].averageAssists.toFixed(2)}}</h2>
                  <p>Avg. Assists</p>
                </div>
              </mat-card-content>
          </mat-card>
        </div>
        <div class="hero-insight-heroes-played-box">
<!--           <app-doughnut-chart-component
                  [heroId]="heroesPlayed()[0].hero_id"
                  [lastPlayed]="heroesPlayed()[0].last_played"
                  [games]="heroesPlayed()[0].games"
                  [win]="heroesPlayed()[0].win"
                  [againstGames]="heroesPlayed()[0].against_games"
                  [againstWins]="heroesPlayed()[0].against_wins"
                  [doughnutChartLabel]="['loses', 'Wins']" /> -->
        <mat-card>
          <mat-card-header>
            <div mat-card-avatar class="mat-card-avatar-class">
              <img class="header-image" src="http://cdn.dota2.com/{{mostPlayedHeroId().heroes[1].img}}">
            </div>
            <div>
              <h3>{{mostPlayedHeroId().heroes[1].localized_name}}</h3>
              <p class="heroes-played-role">
                @for(element of mostPlayedHeroId().heroes[1].roles; track element){
                  <span>{{element}},&nbsp;</span>
                }
              </p>
            </div>
          </mat-card-header>
            <mat-card-content>
              <div class="mat-card-content-box">
                <h2>{{mostPlayedHeroId().heroes[1].averageKills.toFixed(2)}}</h2>
                <p>Avg. Kills</p>
              </div>
              <div class="mat-card-content-box">
                <h2>{{mostPlayedHeroId().heroes[1].averageDeaths.toFixed(2)}}</h2>
                <p>Avg. Deaths</p>
              </div>
              <div class="mat-card-content-box">
                <h2>{{mostPlayedHeroId().heroes[1].averageAssists.toFixed(2)}}</h2>
                <p>Avg. Assists</p>
              </div>
            </mat-card-content>
        </mat-card>
        </div>

        <div class="hero-insight-heroes-played-box">
<!--           <app-doughnut-chart-component
                  [heroId]="heroesPlayed()[0].hero_id"
                  [lastPlayed]="heroesPlayed()[0].last_played"
                  [games]="heroesPlayed()[0].games"
                  [win]="heroesPlayed()[0].win"
                  [againstGames]="heroesPlayed()[0].against_games"
                  [againstWins]="heroesPlayed()[0].against_wins"
                  [doughnutChartLabel]="['loses', 'Wins']" /> -->
        <mat-card>
          <mat-card-header>
            <div mat-card-avatar class="mat-card-avatar-class">
              <img class="header-image" src="http://cdn.dota2.com/{{mostPlayedHeroId().heroes[2].img}}">
            </div>
            <div>
              <h3>{{mostPlayedHeroId().heroes[2].localized_name}}</h3>
              <p class="heroes-played-role">
                @for(element of mostPlayedHeroId().heroes[2].roles; track element){
                  <span>{{element}},&nbsp;</span>
                }
              </p>
            </div>
          </mat-card-header>
            <mat-card-content>
              <div class="mat-card-content-box">
                <h2>{{mostPlayedHeroId().heroes[2].averageKills.toFixed(2)}}</h2>
                <p>Avg. Kills</p>
              </div>
              <div class="mat-card-content-box">
                <h2>{{mostPlayedHeroId().heroes[2].averageDeaths.toFixed(2)}}</h2>
                <p>Avg. Deaths</p>
              </div>
              <div class="mat-card-content-box">
                <h2>{{mostPlayedHeroId().heroes[2].averageAssists.toFixed(2)}}</h2>
                <p>Avg. Assists</p>
              </div>
            </mat-card-content>
        </mat-card>
        </div>

  </div>
  <br><br>

  <div>
    <div class="hero-insight-container-header-box">
      <h3>Recent Matches</h3>
    </div>
    <app-line-chart-component [usedBy]="'insight-view'" [matchList]="recentMatches()"/>
  </div>

  <br><br><br>
  <h3>Aggregate Data for Recent Matches</h3>
  <div class="aggregate-container">
    <div class="aggregate-box">
      <h2 [ngStyle]="{'color': overallWinRateColorSet(recentMatches()?.match_aggregate?.winRate) }" >{{recentMatches()?.match_aggregate?.winRate?.toFixed(2)}}%</h2>
      <p>Win Rate</p>
    </div>
    <div class="aggregate-box">
      <h2 [ngStyle]="{'color': gpmColorSet(recentMatches()?.match_aggregate?.avgGPM)}">{{recentMatches()?.match_aggregate?.avgGPM?.toFixed(2)}}</h2>
      <p>Avg. GPM</p>
    </div>
    <div class="aggregate-box">
      <h2 [ngStyle]="{'color': kdaColorSet(recentMatches()?.match_aggregate?.cumulativeKDA)}" >{{recentMatches()?.match_aggregate?.cumulativeKDA?.toFixed(2)}}</h2>
      <p>Cumulative. KDA</p>
    </div>
    <div class="aggregate-box">
      <h2 [ngStyle]="{'color': lastHitColorSet(recentMatches()?.match_aggregate?.avgLastHit) }">{{recentMatches()?.match_aggregate?.avgLastHit?.toFixed(2)}}</h2>
      <p>Avg. CS</p>
    </div>
    <div class="aggregate-box">
      <h2 [ngStyle]="{'color':  avgPerMinlastHitColorSet(recentMatches()?.match_aggregate?.avgLastHitPerMinute)}">{{recentMatches()?.match_aggregate?.avgLastHitPerMinute?.toFixed(2)}}</h2>
      <p>Overall CS per Minute</p>
    </div>
    <div class="aggregate-box">
      <h2 [ngStyle]="{'color': xpmColorSet(recentMatches()?.match_aggregate?.avgXPM)}">{{recentMatches()?.match_aggregate?.avgXPM?.toFixed(2)}}</h2>
      <p>Avg. XPM</p>
    </div>

  </div>
</div>
